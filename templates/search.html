<!doctype html>
<html>
<head><title>User Search</title></head>
<body>
  <h2>User Search</h2>

  <form method="POST">
    <input name="q" placeholder="Search username..." value="{{ q | e }}">
    <button type="submit">Search</button>
  </form>

 {% if xss_risk %}
  <div style="padding:10px; margin:10px 0; border:1px solid #f0ad4e; background:#fcf8e3;">
    ⚠️ XSS Risk Detected (Demo): Your input contains characters that should be output-encoded.
    This page intentionally renders input in an unsafe way for education.
  </div>
{% endif %}

{% if q %}
  <p>You searched for: <b>{{ q | safe }}</b></p>
{% endif %}


  {% if results %}
    <h3>Results</h3>
    <ul>
      {% for r in results %}
        <li>ID: {{ r.id }} | Username: {{ r.username }} | Role: {{ r.role }}</li>
      {% endfor %}
    </ul>
  {% elif q %}
    <p>No matches found.</p>
  {% endif %}

  <p><a href="/dashboard">Back to Dashboard</a></p>
</body>
</html>
